@{
    @using AssetManager.Api.Attributes;
    @using AssetManager.Api.Attributes.Types;
    @model Tuple<StringAttributeType, StringAttribute>;

    StringAttributeType typeInfo = @Model.Item1;
    StringAttribute attributeInfo = @Model.Item2;

    string escapedKey = typeInfo.EscapeKey();
}

<label><i class="fa fa-caret-right"></i> @typeInfo.Key@if ( typeInfo.Required ){<span style="color:darkred;"> *</span>}</label>
<input id="str_@escapedKey"
        class="form-control"
        value="@attributeInfo.Value"
        type="text"
        name="@typeInfo.Key"
/>

<div id="str_@(escapedKey)_error"></div>

<script>
    let strAttributeType_@(escapedKey) = new StringAttributeTypeInfo();
    strAttributeType_@(escapedKey).SetDefault(@((string.IsNullOrWhiteSpace( typeInfo.DefaultValue )? typeInfo.DefaultValue : "null" )))
    .SetRequired(@typeInfo.Required.ToString().ToLower());

    let strAttribute_@(escapedKey) = new StringAttribute(strAttributeType_@(escapedKey), "@typeInfo.Key");

    let strForm_@(escapedKey) = new TextboxWrapper(
        document.getElementById("str_@escapedKey"),
        document.getElementById("str_@(escapedKey)_error")
    );

    strForm_@(escapedKey).OnSyncValue = function (value) { strAttribute_@(escapedKey).SetValue(value); };

    adder.AddAttribute(strAttribute_@(escapedKey), strForm_@(escapedKey));
</script>